<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introducing Javel</title>
    <meta name="description" content="Wrap your plain JavaScript objects into customizable Laravel-like models.">
    
    
    <link rel="preload" href="/assets/css/0.styles.d1fafc99.css" as="style"><link rel="preload" href="/assets/js/app.f0379f84.js" as="script"><link rel="preload" href="/assets/js/2.f113c167.js" as="script"><link rel="preload" href="/assets/js/10.463c40b2.js" as="script"><link rel="prefetch" href="/assets/js/11.41347932.js"><link rel="prefetch" href="/assets/js/12.160cf6fa.js"><link rel="prefetch" href="/assets/js/13.869049d5.js"><link rel="prefetch" href="/assets/js/14.6ab5dbac.js"><link rel="prefetch" href="/assets/js/15.5b213614.js"><link rel="prefetch" href="/assets/js/16.9b9d25f1.js"><link rel="prefetch" href="/assets/js/17.53e9786c.js"><link rel="prefetch" href="/assets/js/18.407766eb.js"><link rel="prefetch" href="/assets/js/19.ad818b5a.js"><link rel="prefetch" href="/assets/js/20.6a6cbda5.js"><link rel="prefetch" href="/assets/js/21.16473eda.js"><link rel="prefetch" href="/assets/js/22.17daa536.js"><link rel="prefetch" href="/assets/js/23.a3b585a7.js"><link rel="prefetch" href="/assets/js/24.693bd400.js"><link rel="prefetch" href="/assets/js/25.1cb8e654.js"><link rel="prefetch" href="/assets/js/3.e245ae37.js"><link rel="prefetch" href="/assets/js/4.32ef7c1a.js"><link rel="prefetch" href="/assets/js/5.1fabd509.js"><link rel="prefetch" href="/assets/js/6.3a66a41c.js"><link rel="prefetch" href="/assets/js/7.9038972a.js"><link rel="prefetch" href="/assets/js/8.0cd2f1f4.js"><link rel="prefetch" href="/assets/js/9.1449d7bd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d1fafc99.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="content default"><h1 id="introducing-javel"><a href="#introducing-javel" aria-hidden="true" class="header-anchor">#</a> Introducing Javel</h1> <p>When passing information from Laravel (or another framework) to your JavaScript, it’s easy to forget that you do not have to work with plain JavaScript objects.</p> <p>Take the following Vue.js component as an example.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            article<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">async</span> <span class="token function">fetchArticle</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>article <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/api/article/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">async</span> <span class="token function">updateArticle</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Assuming the server returns the updated article.</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>article <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/api/article/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>article<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">articleUrl</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">isPublished</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">readingTime</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is a typical component that ends up with all the burden of creating custom accessors, mutators and asynchronous calls to our server.</p> <p>If we assume this component handles the edition of an article, we can imagine that some of this logic will also be needed for other components, e.g. creating articles, finding related articles, presenting all the comments of an article, etc.</p> <h2 id="easy-on-the-stores"><a href="#easy-on-the-stores" aria-hidden="true" class="header-anchor">#</a> Easy on the stores</h2> <p>To stay DRY in these situations, developers tend to jump on the occasion to use <strong>store frameworks</strong> like Vuex, Redux or (better yet) by creating their own humble version.</p> <p>Whilst stores are a good way to regroup all of the logic related to a piece of information, they’re often not what you need.</p> <p>In our previous example, we could create a new <code>articleStore</code> with a state that includes a <code>currentArticle</code>. Then the methods could be defined in the store as actions and the computed properties as getters. However that logic is now limited to one article at a time which just feels like we’re forcing the wrong tool into our problem.</p> <p><img src="/assets/img/Stores.06c2254b.png" alt="Diagram of one store and lots of object articles"></p> <p>Don’t get me wrong, stores are hugely useful but only when they are used in the way they were intended to. That is, when a particular piece of information needs to be shared across multiple components, e.g. a <code>userStore</code> that keeps track of the authenticated user. But in that case, all we want is to wrap some extra logic to a native type. That’s just object oriented programming.</p> <h2 id="models-in-your-javascript"><a href="#models-in-your-javascript" aria-hidden="true" class="header-anchor">#</a> Models in your JavaScript</h2> <p>Let’s stop managing those powerless JavaScript objects and wrap them in something more useful.</p> <p>Taking our article example, here is what extracting all of that logic to a class could look like.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Article</span>
<span class="token punctuation">{</span>
    <span class="token function">construct</span> <span class="token punctuation">(</span>attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttributes</span><span class="token punctuation">(</span>attributes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">setAttributes</span> <span class="token punctuation">(</span>attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> attributes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">find</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/api/article/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Article</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">async</span> <span class="token function">update</span> <span class="token punctuation">(</span>attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/api/article/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span> attributes<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttributes</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">get</span> <span class="token function">url</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">isPublished</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">readingTime</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can now interact with our articles in a much more intuitive Laravel-ish way.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> article <span class="token operator">=</span> <span class="token keyword">await</span> Article<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">await</span> article<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>newData<span class="token punctuation">)</span>

article<span class="token punctuation">.</span>url
article<span class="token punctuation">.</span>isPublished
article<span class="token punctuation">.</span>readingTime
</code></pre></div><p>Using models in this case is much more convenient than using stores since we can now assume all of our <code>articles</code> are instances of our <code>Article</code> class.</p> <p><img src="/assets/img/Models.03d9f4d0.png" alt="Diagram of articles wrapped in Article class"></p> <h2 id="don’t-start-from-scratch"><a href="#don’t-start-from-scratch" aria-hidden="true" class="header-anchor">#</a> Don’t start from scratch</h2> <p>I’ve been creating a lot of JavaScript models in a way that matches Eloquent’s style (Laravel’s active record) and I found myself repeating the same logic across multiple projects. All my models would extend a <code>Model</code> class that defines the main asynchronous API calls like <code>find</code>, <code>create</code>, <code>save</code>, etc.</p> <p>For that reason I decided to extract that logic into a package that I called &quot;Javel&quot; (mix of JavaScript and Laravel, plus it means bleach in french and that’s gonna clean your frontend).</p> <p>Javel, provides us with a powerful base model that you can configure to match the requirements of your project.</p> <GithubButton url="https://github.com/lorisleiva/javel" title="Javel on GitHub"></GithubButton> <p>Let's rewrite our <code>Article</code> class using Javel.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Model <span class="token keyword">from</span> ‘javel’

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token function">url</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">isPublished</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">get</span> <span class="token function">readingTime</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>And that’s it! You now have access to a range of useful methods that will make API calls on your behalf and handle responses appropriately.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> Article<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                         <span class="token comment">// =&gt; [ Article* ]</span>
<span class="token keyword">await</span> Article<span class="token punctuation">.</span><span class="token function">paginate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>               <span class="token comment">// =&gt; { data: [ Article* ], current_page: 2, ... }</span>
<span class="token keyword">await</span> Article<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>                                       <span class="token comment">// =&gt; Article { id: 1, ... }</span>

<span class="token keyword">let</span> article <span class="token operator">=</span> <span class="token keyword">await</span> Article<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'My article'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// =&gt; Article { id: 2, name: 'My article' }</span>
<span class="token keyword">await</span> article<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'My updated article'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token comment">// =&gt; Article { id: 2, name: 'My updated article' }</span>
<span class="token keyword">await</span> article<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                      <span class="token comment">// =&gt; Deleted from the server</span>

article <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Article</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'My draft blog post'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
article<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'My new blog post'</span>
<span class="token keyword">await</span> article<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                        <span class="token comment">// =&gt; Article { id: 3, name: 'My new blog post', ... }</span>
</code></pre></div><h2 id="wait-a-minute"><a href="#wait-a-minute" aria-hidden="true" class="header-anchor">#</a> Wait a minute...</h2> <h3 id="how-do-you-know-i’m-using-axios"><a href="#how-do-you-know-i’m-using-axios" aria-hidden="true" class="header-anchor">#</a> how do you know I’m using <code>axios</code> ?</h3> <p>By default Javel will use axios if it is available from the <code>window</code> (which is the case for Laravel applications by default).</p> <p>If you wish to change that, simply override the <code>makeRequest</code> method.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token function">makeRequest</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token comment">// Return a promise from your HTTP service.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><small>Check out the documentation for more information on the <a href="https://github.com/lorisleiva/javel/blob/0b3b64d245561392497c850aa69e0c6b2fc0a767/docs/MakesRequests.md#the-request-object" target="_blank" rel="noopener noreferrer">content of the request object<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or if you need some <a href="https://github.com/lorisleiva/javel/blob/0b3b64d245561392497c850aa69e0c6b2fc0a767/docs/MakesRequests.md#configure-your-http-service" target="_blank" rel="noopener noreferrer">examples to get started<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</small></p> <h3 id="how-do-you-know-that-my-urls-are-prefixed-with-api"><a href="#how-do-you-know-that-my-urls-are-prefixed-with-api" aria-hidden="true" class="header-anchor">#</a> How do you know that my URLs are prefixed with <code>/api</code> ?</h3> <p>That’s the default base URL that Javel uses. You can change that by overriding the <code>baseUrl</code> method. Note that you might want to override this method on a <code>Model</code> superclass.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Model <span class="token keyword">as</span> BaseModel <span class="token keyword">from</span> <span class="token string">'javel'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Model</span> <span class="token keyword">extends</span> <span class="token class-name">BaseModel</span>
<span class="token punctuation">{</span>
    <span class="token function">baseUrl</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'api/v2'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="how-do-you-know-which-url-to-use-altogether"><a href="#how-do-you-know-which-url-to-use-altogether" aria-hidden="true" class="header-anchor">#</a> How do you know which URL to use altogether?</h3> <p>Javel will use the <code>snake_case</code> of your class name followed by any parameters that might be given to the requests. For example, a class called <code>Article</code> will use the following URLs by default.</p> <div class="language- extra-class"><pre class="language-text"><code>all         =&gt; '/api/article' (GET)
paginate    =&gt; '/api/article' (GET)
find        =&gt; '/api/article/:id' (GET)
create      =&gt; '/api/article' (POST)
persist     =&gt; '/api/article' (POST)
update      =&gt; '/api/article/:id' (PATCH)
delete      =&gt; '/api/article/:id' (DELETE)
</code></pre></div><p>However, if your JavaScript is minified for production, your class name will not stay the same and your requests will fail. For that reason, it’s better to be explicit about your URLs. <a href="https://github.com/lorisleiva/javel/blob/0b3b64d245561392497c850aa69e0c6b2fc0a767/docs/MakesRequests.md#default-buildurl-and-minification-issue" target="_blank" rel="noopener noreferrer">Read more about this gotcha<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in the documentation.</p> <p>You can be more explicit about your URLs by overriding the <code>buildUrl</code> method.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token function">buildUrl</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Extract what you need from the request object.</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> action<span class="token punctuation">,</span> params<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> request

        <span class="token comment">// Build a URL by returning a string.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'all'</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>category<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`category/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>category<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/articles`</span></span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Build a URL by returning an array which will be properly joined.</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'article'</span><span class="token punctuation">,</span> <span class="token operator">...</span>params<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="what-are-you-doing-with-the-responses-of-my-api-calls"><a href="#what-are-you-doing-with-the-responses-of-my-api-calls" aria-hidden="true" class="header-anchor">#</a> What are you doing with the responses of my API calls?</h3> <p>By default, if the request was a static call (e.g. <code>find</code>, <code>create</code> or <code>all</code>) the response will be wrapped in a new model or in an array of new models. If the request was not static then we are likely dealing with an existing model and therefore its attributes will be updated with the response’s data.</p> <p>You’ll likely want to customise this logic by overriding the <code>afterRequest</code> method.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token function">afterRequest</span> <span class="token punctuation">(</span>response<span class="token punctuation">,</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> request<span class="token punctuation">.</span>isStatic <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="how-can-i-create-my-own-api-calls"><a href="#how-can-i-create-my-own-api-calls" aria-hidden="true" class="header-anchor">#</a> How can I create my own API calls?</h3> <p>Easy, you just make a call to the <code>request()</code> method which will go through the whole process for you. For example, let’s create a new endpoint that publishes an existing article.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">publish</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> published_at<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span> method<span class="token punctuation">:</span> <span class="token string">'PATCH'</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`article/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Alternatively, you can delegate to existing endpoints.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">publish</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> published_at<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="mixins-in-your-javascript"><a href="#mixins-in-your-javascript" aria-hidden="true" class="header-anchor">#</a> Mixins in your JavaScript</h2> <p>As the previous questions have shown, each project has their own requirements and configuration is key when defining generic models.</p> <p>That’s why Javel is written as a set of mixins. Each mixin contributes to the models by providing its own piece of logic. At the time of writing this article, these are the mixins that are included in Javel’s model:</p> <ul><li><a href="https://github.com/lorisleiva/javel/blob/0b3b64d245561392497c850aa69e0c6b2fc0a767/docs/HasAttributes.md" target="_blank" rel="noopener noreferrer">HasAttributes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Defines the basis of getting and setting attributes on a Model and provides some useful methods like <code>primaryKey</code>, <code>exists</code>, <code>is</code>, <code>clone</code>, etc.</li> <li><a href="https://github.com/lorisleiva/javel/blob/0b3b64d245561392497c850aa69e0c6b2fc0a767/docs/HasRelationships.md" target="_blank" rel="noopener noreferrer">HasRelationships<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Enables models to configure their relationships with each other so that their attributes are automatically wrapped in the right model.</li> <li><a href="https://github.com/lorisleiva/javel/blob/0b3b64d245561392497c850aa69e0c6b2fc0a767/docs/KeepsParentRelationship.md" target="_blank" rel="noopener noreferrer">KeepsParentRelationship<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Ensures each child relationship keeps track of its parent and how to access itself from it. This enables models to climb up the relationship tree and even remove themselves from their parent when deleted.</li> <li><a href="https://github.com/lorisleiva/javel/blob/0b3b64d245561392497c850aa69e0c6b2fc0a767/docs/MakesRequests.md" target="_blank" rel="noopener noreferrer">MakesRequests<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Introduces async actions (<code>find</code>, <code>create</code>, <code>update</code>, etc.) to conveniently request the server and provides all the hooks necessary to customize how to handle your request/response proctol for each model.</li></ul> <p><small>Javel also provides additional (more opinionated) mixins that are not included in the base model but that you can plug when needed.</small></p> <p>Under the hood, Javel uses the <a href="https://github.com/justinfagnani/mixwith.js" target="_blank" rel="noopener noreferrer">mixwith<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library to assemble mixins together. Javel also exposes this library back to you so you can easily create your own mixins.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Model <span class="token keyword">as</span> BaseModel<span class="token punctuation">,</span> Mixin<span class="token punctuation">,</span> mix <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'javel'</span>

<span class="token comment">// Create a mixin</span>
<span class="token keyword">const</span> MyMixin <span class="token operator">=</span> <span class="token function">Mixin</span><span class="token punctuation">(</span>superclass <span class="token operator">=&gt;</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> superclass <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Use a mixin</span>
<span class="token keyword">class</span> <span class="token class-name">Model</span> <span class="token keyword">extends</span> <span class="token class-name">mix</span><span class="token punctuation">(</span>BaseModel<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>MyMixin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="conclusions"><a href="#conclusions" aria-hidden="true" class="header-anchor">#</a> Conclusions</h2> <p>Since we are encouraged to break down our applications into small components, we can easily end up giving them too much responsibility. Individually they look nice and small and they are easy to reason with. But as a whole, we can find our model logic duplicated and scattered everywhere.</p> <p><img src="/assets/img/Components-before-models.bdeb30b2.png" alt="Diagram of components with logic everywhere"></p> <p>Javel helps you bring a bit of Eloquent into your JavaScript to free our components of that burden and create a single point of failure.</p> <p><img src="/assets/img/Components-after-models.01888956.png" alt="Diagram of components with logic in models"></p> <p>I hope you find this package useful and don’t hesitate to share your mixins with the community. 🎁</p> <GithubButton url="https://github.com/lorisleiva/javel" title="Javel on GitHub"></GithubButton></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f0379f84.js" defer></script><script src="/assets/js/2.f113c167.js" defer></script><script src="/assets/js/10.463c40b2.js" defer></script>
  </body>
</html>
