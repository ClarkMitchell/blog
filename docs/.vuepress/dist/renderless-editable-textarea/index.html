<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Renderless editable textarea</title>
    <meta name="description" content="In this article, we take renderless components one step further by treating them as Facades.">
    
    
    <link rel="preload" href="/assets/css/0.styles.d1fafc99.css" as="style"><link rel="preload" href="/assets/js/app.f0379f84.js" as="script"><link rel="preload" href="/assets/js/2.f113c167.js" as="script"><link rel="preload" href="/assets/js/9.1449d7bd.js" as="script"><link rel="prefetch" href="/assets/js/10.463c40b2.js"><link rel="prefetch" href="/assets/js/11.41347932.js"><link rel="prefetch" href="/assets/js/12.160cf6fa.js"><link rel="prefetch" href="/assets/js/13.869049d5.js"><link rel="prefetch" href="/assets/js/14.6ab5dbac.js"><link rel="prefetch" href="/assets/js/15.5b213614.js"><link rel="prefetch" href="/assets/js/16.9b9d25f1.js"><link rel="prefetch" href="/assets/js/17.53e9786c.js"><link rel="prefetch" href="/assets/js/18.407766eb.js"><link rel="prefetch" href="/assets/js/19.ad818b5a.js"><link rel="prefetch" href="/assets/js/20.6a6cbda5.js"><link rel="prefetch" href="/assets/js/21.16473eda.js"><link rel="prefetch" href="/assets/js/22.17daa536.js"><link rel="prefetch" href="/assets/js/23.a3b585a7.js"><link rel="prefetch" href="/assets/js/24.693bd400.js"><link rel="prefetch" href="/assets/js/25.1cb8e654.js"><link rel="prefetch" href="/assets/js/3.e245ae37.js"><link rel="prefetch" href="/assets/js/4.32ef7c1a.js"><link rel="prefetch" href="/assets/js/5.1fabd509.js"><link rel="prefetch" href="/assets/js/6.3a66a41c.js"><link rel="prefetch" href="/assets/js/7.9038972a.js"><link rel="prefetch" href="/assets/js/8.0cd2f1f4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d1fafc99.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="content default"><h1 id="renderless-editable-textarea"><a href="#renderless-editable-textarea" aria-hidden="true" class="header-anchor">#</a> Renderless editable textarea</h1> <p>Following my previous article introducing a renderless component that <a href="/renderless-resizable-textarea">resizes a textarea</a>, we'll now explore one that can make all sorts of changes to a textarea's content.</p> <p>Contrary to our <code>&lt;resizable-textarea&gt;</code> component that acted as a simple wrapper, our new <code>&lt;editable-textarea&gt;</code> will go one step further and allow us to control its behaviour from outside of the component.</p> <GithubButton url="https://github.com/lorisleiva/vue-lab/tree/master/components/editable-textarea"></GithubButton> <h2 id="use-and-control"><a href="#use-and-control" aria-hidden="true" class="header-anchor">#</a> Use and control</h2> <p>We simply wrap our component around a textarea and we give it a reference in order to control its behaviour.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>editable-textarea</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>editor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>editable-textarea</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Then within the parent component, we can call any methods defined in the <code>editable-textarea</code> component.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editor<span class="token punctuation">.</span><span class="token function">wrapWith</span><span class="token punctuation">(</span><span class="token string">'**'</span><span class="token punctuation">)</span> <span class="token comment">// Toggles: bold</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editor<span class="token punctuation">.</span><span class="token function">wrapWith</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span>  <span class="token comment">// Toggles: italic</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editor<span class="token punctuation">.</span><span class="token function">wrapWith</span><span class="token punctuation">(</span><span class="token string">'~~'</span><span class="token punctuation">)</span> <span class="token comment">// Toggles: strikethrough</span>
</code></pre></div><p>And that's it. The parent component does not need to know anything about how this function is implemented or even listen to any events.</p> <p>It only needs to know about the underlying &quot;API&quot; provided by the child component. It is then the parent's responsibility to provide the buttons that will trigger the use of its API.</p> <CodePen id="LrVPKE" title="Editable Textarea"></CodePen> <h2 id="components-with-magic-wands-✨"><a href="#components-with-magic-wands-✨" aria-hidden="true" class="header-anchor">#</a> Components with magic wands ✨</h2> <p>The reference of such components can be seen as magic wands that control the entire ecosystem of an underlying black box, a.k.a Facades.</p> <p><img src="/assets/img/Components-with-magic-wands.1fe95349.png#w90" alt="Components with magic wands diagram"></p> <p>Such components are really powerful as they provide <strong>reusable complex behaviour</strong> with very <strong>low coupling</strong>.</p> <h2 id="diving-into-the-component"><a href="#diving-into-the-component" aria-hidden="true" class="header-anchor">#</a> Diving into the component</h2> <p>Less theory more practice. Let's see how this <code>editable-textarea</code> works.</p> <h3 id="renderless"><a href="#renderless" aria-hidden="true" class="header-anchor">#</a> Renderless</h3> <p>It simply renders whatever its wrapping.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="get-and-update-the-textarea-s-content"><a href="#get-and-update-the-textarea-s-content" aria-hidden="true" class="header-anchor">#</a> Get and update the textarea's content</h3> <p>First it has a method that extracts the content of the underlying textarea with the selection's position. Since we assume the component will be wrapping a textarea directly, we can access it using <code>this.$el</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code>methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">getContent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            text<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
            start<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>selectionStart<span class="token punctuation">,</span>
            end<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>selectionEnd<span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>For example, a textarea containing <code>Hello world</code> with <code>world</code> selected will return:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    text<span class="token punctuation">:</span> <span class="token string">'Hello world'</span><span class="token punctuation">,</span>
    start<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token comment">// Position of 'w'</span>
    end<span class="token punctuation">:</span> <span class="token number">11</span>   <span class="token comment">// Position of 'd' + 1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>It also has a complementary method that updates the textarea with a given text and selects it at the given positions.</p> <div class="language-js extra-class"><pre class="language-js"><code>methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">getContent</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">updateContent</span> <span class="token punctuation">(</span>text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token comment">// Updates the textarea's value.</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>value <span class="token operator">=</span> text
        
        <span class="token comment">// Trigger an 'input' event directly on the DOM element.</span>
        <span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">,</span> <span class="token string">'input'</span><span class="token punctuation">)</span>

        <span class="token comment">// Select the right portion of text.</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>selectionStart <span class="token operator">=</span> start
        <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>selectionEnd <span class="token operator">=</span> end
        
        <span class="token comment">// Focus the textarea since we propably clicked on a button.</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> text
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>As you can see we use a <code>triggerEvent()</code> helper function that triggers an event on the DOM element directly instead of relying on inter-component event communication.</p> <p>This frees the parent component of knowing which events to listen to and reduces coupling. If the parent component is using <code>v-model</code> or <code>@input</code> on the textarea, it will automatically be updated of any changes.</p> <p>Now that we can get and update the text of the textarea we can have fun creating methods that follow this schema:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">{</span> text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// Do something with text, start, end.</span>
<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateContent</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>
</code></pre></div><h3 id="wrap-selection-with-patterns"><a href="#wrap-selection-with-patterns" aria-hidden="true" class="header-anchor">#</a> Wrap selection with patterns</h3> <p>A very easy way to wrap the selected text within a pattern (like <code>**</code> for bold in markdown), is the following:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">wrapWith</span> <span class="token punctuation">(</span>pattern<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment">// Cut the text before, inside and after the selection.</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> before<span class="token punctuation">,</span> selection<span class="token punctuation">,</span> after <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">cutTextWithSelection</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>

    <span class="token comment">// Add the pattern around the selection.</span>
    before <span class="token operator">=</span> before <span class="token operator">+</span> pattern
    after <span class="token operator">=</span> pattern <span class="token operator">+</span> after

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateContent</span><span class="token punctuation">(</span>
        before <span class="token operator">+</span> selection <span class="token operator">+</span> after<span class="token punctuation">,</span>       <span class="token comment">// Reassemble the text</span>
        before<span class="token punctuation">.</span>length<span class="token punctuation">,</span>                    <span class="token comment">// Start selection after `before`</span>
        before<span class="token punctuation">.</span>length <span class="token operator">+</span> selection<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token comment">// End selection after `before + selection`</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>However, we might want the pattern to get removed if it already exists. Meaning if I call <code>wrapWith('**')</code> twice on <code>world</code> of <code>Hello world</code>, I expect <code>Hello world</code>, not <code>Hello ****world****</code>.</p> <p><img src="/assets/img/Kapture-2018-05-31-at-19.01.41.0cd133b7.gif#w100" alt="Kapture-2018-05-31-at-19.01.41"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">wrapWith</span> <span class="token punctuation">(</span>pattern<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> before<span class="token punctuation">,</span> selection<span class="token punctuation">,</span> after <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">cutTextWithSelection</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>

    <span class="token comment">// Check if the pattern is already around the selection.</span>
    <span class="token comment">// Using lodash helper functions `startsWith` and `endsWith`.</span>
    <span class="token keyword">let</span> removePattern <span class="token operator">=</span> <span class="token function">endsWith</span><span class="token punctuation">(</span>before<span class="token punctuation">,</span> pattern<span class="token punctuation">)</span> 
        <span class="token operator">&amp;&amp;</span> <span class="token function">startsWith</span><span class="token punctuation">(</span>after<span class="token punctuation">,</span> pattern<span class="token punctuation">)</span> 

    <span class="token comment">// Add or remove the pattern around the selection.</span>
    before <span class="token operator">=</span> removePattern <span class="token operator">?</span> before<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span> pattern<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">:</span> before <span class="token operator">+</span> pattern
    after <span class="token operator">=</span> removePattern <span class="token operator">?</span> after<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">:</span> pattern <span class="token operator">+</span> after

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateContent</span><span class="token punctuation">(</span>
        before <span class="token operator">+</span> selection <span class="token operator">+</span> after<span class="token punctuation">,</span>
        before<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
        before<span class="token punctuation">.</span>length <span class="token operator">+</span> selection<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><img src="/assets/img/Kapture-2018-05-31-at-18.59.09.f2e4681d.gif#w100" alt="Kapture-2018-05-31-at-18.59.09"></p> <p>This works fine but we have a little conflict between bold <code>**</code> and italic <code>*</code>. If I call <code>wrapWith('**')</code> (bold) followed by <code>wrapWith('*')</code> (italic), I expect the result to be: <code>Hello ***world***</code> (bold + italic). Let's add a little exception in our method.</p> <p><img src="/assets/img/Kapture-2018-05-31-at-18.57.25.3238958e.gif#w100" alt="Kapture-2018-05-31-at-18.57.25"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">wrapWith</span> <span class="token punctuation">(</span>pattern<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> before<span class="token punctuation">,</span> selection<span class="token punctuation">,</span> after <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">cutTextWithSelection</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>

    <span class="token comment">// Exception for bold and italic.</span>
    <span class="token keyword">let</span> keepItalicPattern <span class="token operator">=</span> pattern <span class="token operator">===</span> <span class="token string">'*'</span> 
        <span class="token operator">&amp;&amp;</span> <span class="token function">endsWith</span><span class="token punctuation">(</span>before<span class="token punctuation">,</span> <span class="token string">'**'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span> <span class="token function">endsWith</span><span class="token punctuation">(</span>before<span class="token punctuation">,</span> <span class="token string">'***'</span><span class="token punctuation">)</span> 
        <span class="token operator">&amp;&amp;</span> <span class="token function">startsWith</span><span class="token punctuation">(</span>after<span class="token punctuation">,</span> <span class="token string">'**'</span><span class="token punctuation">)</span>  <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span> <span class="token function">startsWith</span><span class="token punctuation">(</span>after<span class="token punctuation">,</span> <span class="token string">'***'</span><span class="token punctuation">)</span>

    <span class="token comment">// Do not remove the pattern if we add italic on bold.</span>
    <span class="token keyword">let</span> removePattern <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span>before<span class="token punctuation">,</span> pattern<span class="token punctuation">)</span> 
        <span class="token operator">&amp;&amp;</span> _<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>after<span class="token punctuation">,</span> pattern<span class="token punctuation">)</span> 
        <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span> keepItalicPattern

    before <span class="token operator">=</span> removePattern <span class="token operator">?</span> before<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span> pattern<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">:</span> before <span class="token operator">+</span> pattern
    after <span class="token operator">=</span> removePattern <span class="token operator">?</span> after<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">:</span> pattern <span class="token operator">+</span> after

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateContent</span><span class="token punctuation">(</span>
        before <span class="token operator">+</span> selection <span class="token operator">+</span> after<span class="token punctuation">,</span>
        before<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
        before<span class="token punctuation">.</span>length <span class="token operator">+</span> selection<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><img src="/assets/img/Kapture-2018-05-31-at-18.51.07.21a24bcf.gif#w100" alt="Kapture-2018-05-31-at-18.51.07"></p> <p>And that's it. It might be a very small text editor but you have full control of it and it's already a bit smarter than GitLab's version. 😘</p> <p><img src="/assets/img/Kapture-2018-05-31-at-19.09.13.86501a10.gif#w100" alt="Kapture-2018-05-31-at-19.09.13"></p> <h3 id="helper-functions"><a href="#helper-functions" aria-hidden="true" class="header-anchor">#</a> Helper functions</h3> <p>Here's the code for the two helper functions that were used in the previous sections.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">triggerEvent</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'createEvent'</span> <span class="token keyword">in</span> document<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// modern browsers, IE9+</span>
        <span class="token keyword">var</span> e <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">'HTMLEvents'</span><span class="token punctuation">)</span>
        e<span class="token punctuation">.</span><span class="token function">initEvent</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        el<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// IE 8</span>
        <span class="token keyword">var</span> e <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createEventObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        e<span class="token punctuation">.</span>eventType <span class="token operator">=</span> type
        el<span class="token punctuation">.</span><span class="token function">fireEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token operator">+</span>e<span class="token punctuation">.</span>eventType<span class="token punctuation">,</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">cutTextWithSelection</span> <span class="token punctuation">(</span>text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        before<span class="token punctuation">:</span> text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">,</span>
        selection<span class="token punctuation">:</span> text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">,</span>
        after<span class="token punctuation">:</span> text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>end<span class="token punctuation">,</span> text<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h2> <p>Whilst those components as Facades are very powerful, they are not useful in every case. Sometimes some good all props with some events are more than enough. However for those cases where you need to extract complex and reusable behaviour from a component, they can be a great way to encapsulate that logic.</p> <p>Another example of usage could be to open/close a modal from outside the component. Something like that:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user-delete-modal</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>modal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>user-delete-modal</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$refs.model.open()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Delete account<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Remember also that we did not couple the component with its parent by adding some event communication. Therefore it is very easy to chain the <code>editable-textarea</code> component with the <code>resizable-textarea</code> component (in whichever order). See it for yourself:</p> <CodePen id="yENXPw" title="Editable Textarea with resizable textarea"></CodePen> <p>Don't hesitate to share your ideas for new <strong>components as Facades</strong>. 💡</p> <GithubButton url="https://github.com/lorisleiva/vue-lab/tree/master/components/editable-textarea"></GithubButton></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f0379f84.js" defer></script><script src="/assets/js/2.f113c167.js" defer></script><script src="/assets/js/9.1449d7bd.js" defer></script>
  </body>
</html>
