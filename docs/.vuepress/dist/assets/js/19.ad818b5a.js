(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{377:function(e,t,a){"use strict";a.r(t);var o=a(42),r=Object(o.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"zero-downtime-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zero-downtime-deployment","aria-hidden":"true"}},[e._v("#")]),e._v(" Zero-downtime deployment")]),e._v(" "),a("p",[e._v("I released a Laravel package that gives Artisan the power of zero downtime deployment. Get started in three simple steps.")]),e._v(" "),a("GithubButton",{attrs:{url:"https://github.com/lorisleiva/laravel-deployer",title:"Laravel Deployer on GitHub"}}),e._v(" "),a("h2",{attrs:{id:"introduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introduction","aria-hidden":"true"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),a("p",[e._v("In my quest to have more control over my deployments, I discovered a few useful open source tools that let me achieve this with the luxury of zero downtime deployments. As a Laravel developer, "),a("a",{attrs:{href:"https://github.com/deployphp/deployer",target:"_blank",rel:"noopener noreferrer"}},[e._v("Deployer.org"),a("OutboundLink")],1),e._v(" was the most suitable and comfortable option for me. Since most of the configurations I used for my projects were Laravel specific more than project specific, I decided to extract that logic into a package and encapsulate it within our friend "),a("code",[e._v("php artisan")]),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"let-s-deploy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#let-s-deploy","aria-hidden":"true"}},[e._v("#")]),e._v(" Let's deploy")]),e._v(" "),a("p",[e._v("Deploying your application with "),a("a",{attrs:{href:"https://github.com/lorisleiva/laravel-deployer",target:"_blank",rel:"noopener noreferrer"}},[e._v("Laravel Deployer"),a("OutboundLink")],1),e._v(" is as simple as those three steps:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("composer require lorisleiva/laravel-deployer\nphp artisan deploy:init\nphp artisan deploy\n")])])]),a("ol",[a("li",[e._v("Start by installing the package via composer. Since Laravel 5.5 you don’t even need to register the service provider.")]),e._v(" "),a("li",[e._v("You then need to set up your deployment configuration via the "),a("code",[e._v("deploy:init")]),e._v(" artisan command. This will ask you a few questions to help you get started.")]),e._v(" "),a("li",[e._v("When your configuration file is ready simply run "),a("code",[e._v("php artisan deploy")]),e._v(" and watch your deployment flow automate itself for you.")])]),e._v(" "),a("h2",{attrs:{id:"simple-learning-curve"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simple-learning-curve","aria-hidden":"true"}},[e._v("#")]),e._v(" Simple learning curve")]),e._v(" "),a("p",[e._v("Whilst the learning curve of Deployer.org is already very light, Laravel Deployer provides a "),a("a",{attrs:{href:"https://github.com/lorisleiva/laravel-deployer/blob/master/docs/README.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("documentation"),a("OutboundLink")],1),e._v(" tailored for Laravel projects.")]),e._v(" "),a("p",[e._v("Laravel Deployer also provides extra tasks and set up options relevant for Laravel deployments. For example you can use the "),a("code",[e._v("--forge")]),e._v(" flag when creating your configuration file to help you set up the deployment of a server maintained in Laravel Forge. You can migrate your database, build your assets via NPM, terminate horizon gracefully, reload php-fpm and of course create your own tasks to customize your deployment flow.")]),e._v(" "),a("h2",{attrs:{id:"deployment-power-to-artisan"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployment-power-to-artisan","aria-hidden":"true"}},[e._v("#")]),e._v(" Deployment power to artisan")]),e._v(" "),a("p",[e._v("With Laravel Deployer, Artisan can now leverage the full power of Deployer.org without requiring your developers to install any global dependencies.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("deploy                "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Deploy your Laravel application")]),e._v("\ndeploy:configs        "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Print host configuration")]),e._v("\ndeploy:current        "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Show current paths")]),e._v("\ndeploy:dump "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("task"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Display the task-tree for a given task")]),e._v("\ndeploy:hosts          "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Print all hosts")]),e._v("\ndeploy:init           "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Generate deploy.php configuration file")]),e._v("\ndeploy:list           "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Lists available tasks")]),e._v("\ndeploy:run "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("task"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Execute a given task on your hosts")]),e._v("\n")])])]),a("p",[e._v("Once you’ve set up your deployment hosts you can even use the shortcut "),a("code",[e._v("php artisan ssh")]),e._v(" to connect to your server.")]),e._v(" "),a("p",[e._v("I hope this package will save you as much time as it will do for my future projects. Contributions and feature requests are more than welcome to ensure more of us can deploy with minimal configuration steps.")]),e._v(" "),a("GithubButton",{attrs:{url:"https://github.com/lorisleiva/laravel-deployer",title:"Laravel Deployer on GitHub"}})],1)},[],!1,null,null,null);t.default=r.exports}}]);